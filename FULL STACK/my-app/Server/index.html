<!DOCTYPE html>
<html>
  <head>
    <title>Test CRUD</title>
  </head>
  <body>
    <h3>Items:</h3>
    <ul id="list"></ul>

    <input id="name" placeholder="New item name" />
    <button onclick="add()">Add</button>

    <script>
      const url = 'http://localhost:3000/items';

      async function load() {
        const res = await fetch(url);
        const items = await res.json();
        const ul = document.getElementById('list');
        ul.innerHTML = '';
        items.forEach((i) => {
          const li = document.createElement('li');
          li.textContent = `${i.id}: ${i.name} `;
          const delBtn = document.createElement('button');
          delBtn.textContent = 'Delete';
          delBtn.onclick = async () => {
            await fetch(url + '/' + i.id, { method: 'DELETE' });
            load();
          };
          li.appendChild(delBtn);
          ul.appendChild(li);
        });
      }

      async function add() {
        const name = document.getElementById('name').value;
        if (!name) return alert('Enter name');
        await fetch(url, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ name }),
        });
        document.getElementById('name').value = '';
        load();
      }

      load();
    </script>
  </body>
</html>
